(function(){"use strict";var t={6056:function(t,e,a){a.d(e,{I:function(){return l},db:function(){return c}});var o=a(3977),r=a(1024),i=a(3247);const n={apiKey:"AIzaSyCaotohqe9mwOy0xKSUk6p6tGzOmi4uvn4",authDomain:"flight-ticket-app-addaro.firebaseapp.com",projectId:"flight-ticket-app-addaro",storageBucket:"flight-ticket-app-addaro.appspot.com",messagingSenderId:"94838896700",appId:"1:94838896700:web:c7b3d496c3b7ce1687eb39"},s=(0,o.ZF)(n),l=(0,r.v0)(s),c=(0,i.ad)(s)},8845:function(t,e,a){var o=a(9963),r=a(6252);const i=(0,r._)("head",null,[(0,r._)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"})],-1),n={key:0,id:"nav"};function s(t,e,a,o,s,l){const c=(0,r.up)("router-link"),d=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[i,t.$store.state.user?((0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(c,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1}),(0,r.Uk)(" | "),(0,r.Wm)(c,{to:"/about"},{default:(0,r.w5)((()=>[(0,r.Uk)("Scan QR code")])),_:1}),(0,r.Uk)(" | "),(0,r.Wm)(c,{to:"/add_flight"},{default:(0,r.w5)((()=>[(0,r.Uk)("Add Flight")])),_:1}),(0,r.Uk)(" | "),(0,r.Wm)(c,{to:{name:"Reserved",params:{userId:t.$store.state.userId}}},{default:(0,r.w5)((()=>[(0,r.Uk)("Your Flights")])),_:1},8,["to"]),(0,r.Uk)(" | "),(0,r._)("button",{type:"button",class:"btn btn-info",onClick:e[0]||(e[0]=e=>t.$store.dispatch("logout"))},"Logout")])):(0,r.kq)("",!0),(0,r.Wm)(d)],64)}a(9755),a(3734);var l=a(3907),c={setup(){const t=(0,l.oR)();(0,r.wF)((()=>{t.dispatch("fetchUser")}))}},d=a(3744);const u=(0,d.Z)(c,[["render",s]]);var g=u,h=a(5205);(0,h.z)("/flight_seat_reservation/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var p=a(8732),m=(a(7658),a(6056)),f=a(1024),v=(0,l.MT)({state:{user:null,userId:null},mutations:{SET_USER(t,e){t.user=e,t.userId=e.uid},CLEAR_USER(t){t.user=null,t.userId=null}},actions:{async login({commit:t},e){const{email:a,password:o}=e;try{await(0,f.e5)(m.I,a,o)}catch(r){switch(r.code){default:alert("Something went wrong")}return}t("SET_USER",m.I.currentUser),await p.Z.push("/")},async register({commit:t},e){const{email:a,password:o}=e;try{await(0,f.Xb)(m.I,a,o)}catch(r){switch(r.code){case"auth/email-already-in-use":alert("Email already in use");break;case"auth/invalid-email":alert("Invalid email");break;case"auth/operation-not-allowed":alert("Operation not allowed");break;case"auth/weak-password":alert("Weak password");break;default:alert("Something went wrong")}return}t("SET_USER",m.I.currentUser),await p.Z.push("/")},async logout({commit:t}){await(0,f.w7)(m.I),t("CLEAR_USER"),await p.Z.push("/login")},async loginWithGoogle({commit:t}){const e=new f.hJ;try{const a=await(0,f.rh)(m.I,e),o=a.user;t("SET_USER",o),await p.Z.push("/")}catch(a){alert("Something went wrong")}},fetchUser({commit:t}){m.I.onAuthStateChanged((async e=>{null===e?t("CLEAR_USER"):(t("SET_USER",e),await p.Z.isReady()&&"/login"===p.Z.currentRoute.value.path&&await p.Z.push("/"))}))}}});(0,o.ri)(g).use(v).use(p.Z).mount("#app")},8732:function(t,e,a){a.d(e,{Z:function(){return Oe}});var o=a(2201),r=a(6252),i=a(3577);const n={class:"container"},s={class:"row"},l={class:"card mb-4 box-shadow"},c={class:"card-body"},d={class:"card-title"},u={class:"card-text"},g={class:"card-text"},h={class:"card-text"},p={class:"card-text"},m={class:"card-text"},f={class:"card-text"};function v(t,e,a,o,v,w){const b=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(v.flights,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"col-md-4",key:e},[(0,r._)("div",l,[(0,r.Wm)(b,{to:{name:"Flight",params:{flightId:t.id}}},{default:(0,r.w5)((()=>[(0,r._)("div",c,[(0,r._)("h5",d,"Lot nr "+(0,i.zw)(t.number),1),(0,r._)("p",u,"Lotnisko wylotu: "+(0,i.zw)(t.departureAirport),1),(0,r._)("p",g,"Lotnisko przylotu: "+(0,i.zw)(t.arrivalAirport),1),(0,r._)("p",h,"Długość lotu: "+(0,i.zw)(t.flightLength),1),(0,r._)("p",p,"Godzina wylotu: "+(0,i.zw)(t.departureTime),1),(0,r._)("p",m,"Godzina przylotu: "+(0,i.zw)(t.arrivalTime),1),(0,r._)("p",f,"Cena: "+(0,i.zw)(t.price)+" zł",1)])])),_:2},1032,["to"])])])))),128))])])}var w=a(6056),b=a(3247),_={data(){return{flights:[]}},async mounted(){try{const t=(0,b.hJ)(w.db,"flights"),e=await(0,b.PL)(t);this.flights=e.docs.map((t=>t.data())),console.log(this.flights)}catch(t){console.error(`Error fetching flights: ${t}`)}}},y=a(3744);const L=(0,y.Z)(_,[["render",v]]);var k=L,C=a(9963);const I={class:"container-fluid"},D={class:"row justify-content-center align-items-center"},S={class:"col-md-6 col-lg-4"},U=(0,r._)("h2",{class:"text-center mb-4"},"Login",-1),A={class:"form-group"},T={class:"form-group"},z=(0,r._)("button",{type:"submit",class:"btn btn-primary btn-block mt-4"},"Login",-1),E=(0,r._)("i",{class:"fab fa-google"},null,-1),F={class:"col-md-6 col-lg-4"},x=(0,r._)("h2",{class:"text-center mb-4"},"Register",-1),R={class:"form-group"},j={class:"form-group"},Z=(0,r._)("button",{type:"submit",class:"btn btn-primary btn-block mt-4"},"Register",-1);function M(t,e,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",I,[(0,r._)("div",D,[(0,r._)("div",S,[(0,r._)("form",{class:"card p-4",onSubmit:e[3]||(e[3]=(0,C.iM)(((...t)=>o.login&&o.login(...t)),["prevent"]))},[U,(0,r._)("div",A,[(0,r.wy)((0,r._)("input",{type:"email",class:"form-control",placeholder:"Email address","onUpdate:modelValue":e[0]||(e[0]=t=>o.login_form.email=t)},null,512),[[C.nr,o.login_form.email]])]),(0,r._)("div",T,[(0,r.wy)((0,r._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=t=>o.login_form.password=t)},null,512),[[C.nr,o.login_form.password]])]),z,(0,r._)("button",{onClick:e[2]||(e[2]=(0,C.iM)(((...t)=>o.loginWithGoogle&&o.loginWithGoogle(...t)),["prevent"])),class:"btn btn-danger btn-block mt-4"},[E,(0,r.Uk)(" Login with Google ")])],32)]),(0,r._)("div",F,[(0,r._)("form",{class:"card p-4 my-4",onSubmit:e[6]||(e[6]=(0,C.iM)(((...t)=>o.register&&o.register(...t)),["prevent"]))},[x,(0,r._)("div",R,[(0,r.wy)((0,r._)("input",{type:"email",class:"form-control",placeholder:"Email address","onUpdate:modelValue":e[4]||(e[4]=t=>o.register_form.email=t)},null,512),[[C.nr,o.register_form.email]])]),(0,r._)("div",j,[(0,r.wy)((0,r._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":e[5]||(e[5]=t=>o.register_form.password=t)},null,512),[[C.nr,o.register_form.password]])]),Z],32)])])])}var O=a(2262),H=a(3907),J=a(1024),q=(a(9755),a(3734),{data(){return{audio:null,soundUrl:"https://cdn.pixabay.com/download/audio/2022/03/20/audio_5608de38a9.mp3?filename=annoyed-goodbye-96952.mp3"}},mounted(){this.audio=new Audio(this.soundUrl),this.audio.currentTime=0,this.audio.play()},setup(){const t=(0,O.iH)({}),e=(0,O.iH)({}),a=(0,H.oR)(),o=()=>{a.dispatch("login",t.value)},r=()=>{a.dispatch("register",e.value)},i=async()=>{const t=new J.hJ;try{const e=await(0,J.rh)(w.I,t),a=e.user;console.log("Logged in with Google: ",a)}catch(e){console.log("Error logging in with Google: ",e.message)}};return{login_form:t,register_form:e,login:o,register:r,loginWithGoogle:i}}});const N=(0,y.Z)(q,[["render",M]]);var P=N;const V={class:"container-fluid"},G=(0,r._)("h1",null,"Dodaj lot",-1),W={class:"row justify-content-md-center"},K={class:"col col-lg-3"},Y=(0,r._)("label",{for:"flight-number"},"Numer lotu:",-1),$={class:"row justify-content-md-center"},Q={class:"col col-lg-3"},B=(0,r._)("label",{for:"flight-number"},"Lotnisko wylotu:",-1),X=["value"],tt={class:"row justify-content-md-center"},et={class:"col col-lg-3"},at=(0,r._)("label",{for:"arrival-airport"},"Lotnisko przylotu:",-1),ot=["value"],rt={class:"row justify-content-md-center"},it={class:"col col-lg-3"},nt=(0,r._)("label",{for:"flight-length"},"Długość lotu:",-1),st={class:"row justify-content-md-center"},lt={class:"col col-lg-3"},ct=(0,r._)("label",{for:"departure-time"},"Godzina wylotu:",-1),dt={class:"row justify-content-md-center"},ut={class:"col col-lg-3"},gt=(0,r._)("label",{for:"arrival-time"},"Godzina przylotu:",-1),ht={class:"row justify-content-md-center"},pt={class:"col col-lg-3"},mt=(0,r._)("label",{for:"price"},"Cena:",-1),ft=(0,r._)("button",{type:"submit",class:"btn btn-primary"},"Dodaj lot",-1);function vt(t,e,a,o,n,s){return(0,r.wg)(),(0,r.iD)("div",V,[G,(0,r._)("form",{onSubmit:e[7]||(e[7]=(0,C.iM)(((...t)=>s.addFlight&&s.addFlight(...t)),["prevent"]))},[(0,r._)("div",W,[(0,r._)("div",K,[Y,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"flight-number","onUpdate:modelValue":e[0]||(e[0]=t=>n.flight.number=t)},null,512),[[C.nr,n.flight.number]])])]),(0,r._)("div",$,[(0,r._)("div",Q,[B,(0,r.wy)((0,r._)("select",{class:"form-select","aria-label":"Default select example",id:"departue-airport","onUpdate:modelValue":e[1]||(e[1]=t=>n.flight.departureAirport=t)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.airports,((t,e)=>((0,r.wg)(),(0,r.iD)("option",{key:e,value:t.name},(0,i.zw)(t.name),9,X)))),128))],512),[[C.bM,n.flight.departureAirport]])])]),(0,r._)("div",tt,[(0,r._)("div",et,[at,(0,r.wy)((0,r._)("select",{class:"form-select","aria-label":"Default select example",id:"arrival-airport","onUpdate:modelValue":e[2]||(e[2]=t=>n.flight.arrivalAirport=t)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.airports,((t,e)=>((0,r.wg)(),(0,r.iD)("option",{key:e,value:t.name},(0,i.zw)(t.name),9,ot)))),128))],512),[[C.bM,n.flight.arrivalAirport]])])]),(0,r._)("div",rt,[(0,r._)("div",it,[nt,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control",id:"flight-length","onUpdate:modelValue":e[3]||(e[3]=t=>n.flight.flightLength=t)},null,512),[[C.nr,n.flight.flightLength]])])]),(0,r._)("div",st,[(0,r._)("div",lt,[ct,(0,r.wy)((0,r._)("input",{type:"datetime-local",class:"form-control",id:"departure-time","onUpdate:modelValue":e[4]||(e[4]=t=>n.flight.departureTime=t)},null,512),[[C.nr,n.flight.departureTime]])])]),(0,r._)("div",dt,[(0,r._)("div",ut,[gt,(0,r.wy)((0,r._)("input",{type:"datetime-local",class:"form-control",id:"arrival-time","onUpdate:modelValue":e[5]||(e[5]=t=>n.flight.arrivalTime=t)},null,512),[[C.nr,n.flight.arrivalTime]])])]),(0,r._)("div",ht,[(0,r._)("div",pt,[mt,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":e[6]||(e[6]=t=>n.flight.price=t)},null,512),[[C.nr,n.flight.price]])])]),ft],32)])}var wt={data(){return{airports:[],flight:{number:"",departureAirport:"",arrivalAirport:"",flightLength:"",departureTime:"",arrivalTime:"",price:""},seats:{reserved:""}}},async mounted(){try{const t=(0,b.hJ)(w.db,"airports"),e=await(0,b.PL)(t);this.airports=e.docs.map((t=>t.data())),console.log(this.airports)}catch(t){console.error(`Error fetching flights: ${t}`)}},methods:{async addFlight(){try{const t=await(0,b.ET)((0,b.hJ)(w.db,"flights"),{});await(0,b.pl)((0,b.JU)(w.db,"flights",t.id),this.flight),this.flight={number:"",departureAirport:"",arrivalAirport:"",flightLength:"",departureTime:"",arrivalTime:"",price:""};const e={id:t.id,seats:{}};for(let a=1;a<=200;a++)e.seats[a]={reserved:!1};await(0,b.pl)((0,b.JU)(w.db,"flights",t.id),e,{merge:!0}),console.log("Document written with ID: ",t.id)}catch(t){alert(`Błąd podczas dodawania lotu do bazy danych: ${t}`)}}}};const bt=(0,y.Z)(wt,[["render",vt]]);var _t=bt;const yt=t=>((0,r.dD)("data-v-f01a1000"),t=t(),(0,r.Cn)(),t),Lt=yt((()=>(0,r._)("h1",null,"Choose your seat",-1))),kt=yt((()=>(0,r._)("br",null,null,-1))),Ct=yt((()=>(0,r._)("br",null,null,-1))),It={class:"container"},Dt=yt((()=>(0,r._)("div",{class:"row justify-content-center"},[(0,r._)("h2",null,"Front of the Plane")],-1))),St={class:"row justify-content-center"},Ut={class:"col-md-5"},At=yt((()=>(0,r._)("h2",null,"Left Row",-1))),Tt=["disabled","onClick"],zt=["disabled"],Et=yt((()=>(0,r._)("div",{class:"col-md-2"},null,-1))),Ft={class:"col-md-5"},xt=yt((()=>(0,r._)("h2",null,"Right Row",-1))),Rt=["disabled","onClick"],jt=["disabled"],Zt=["onClick"];function Mt(t,e,a,o,n,s){const l=(0,r.up)("confirmation-window");return(0,r.wg)(),(0,r.iD)(r.HY,null,[Lt,kt,Ct,(0,r._)("div",It,[Dt,(0,r._)("div",St,[(0,r._)("div",Ut,[At,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.rows,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"row",key:e},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.slice(0,3),(t=>((0,r.wg)(),(0,r.iD)("div",{class:"col-4 mb-3",key:t.id},[t.reserved?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,i.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,r._)("div",{class:"card-body",disabled:!t.available},(0,i.zw)(t.id),9,zt)],2)):((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,r._)("div",{class:"card-body",disabled:!t.available,onClick:e=>s.showConfirmation(t.id)},(0,i.zw)(t.id),9,Tt)],2))])))),128))])))),128))]),Et,(0,r._)("div",Ft,[xt,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.rows,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"row",key:e},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.slice(3,6),(t=>((0,r.wg)(),(0,r.iD)("div",{class:"col-4 mb-3",key:t.id},[t.reserved?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,i.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,r._)("div",{class:"card-body",disabled:!t.available},(0,i.zw)(t.id),9,jt)],2)):((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,i.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,r._)("div",{class:"card-body",disabled:!t.available,onClick:e=>s.showConfirmation(t.id)},(0,i.zw)(t.id),9,Rt)],2))])))),128))])))),128))])]),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.seats,(t=>((0,r.wg)(),(0,r.iD)("button",{key:t.id,onClick:e=>s.showConfirmation(t.id)},"Seat "+(0,i.zw)(t.number),9,Zt)))),128)),n.showingConfirmation?((0,r.wg)(),(0,r.j4)(l,{key:0,onClose:s.hideConfirmation,onConfirm:s.handleConfirmation,title:n.title,message:n.message,"seat-id":n.selectedSeatId},null,8,["onClose","onConfirm","title","message","seat-id"])):(0,r.kq)("",!0)])])],64)}a(7658);const Ot={class:"modal",tabindex:"-1",role:"dialog",style:{display:"block"}},Ht={class:"modal-dialog modal-dialog-centered",role:"document"},Jt={class:"modal-content"},qt={class:"modal-header"},Nt={class:"modal-title"},Pt={class:"modal-body"},Vt={class:"modal-footer"};function Gt(t,e,a,o,n,s){return(0,r.wg)(),(0,r.iD)("div",Ot,[(0,r._)("div",Ht,[(0,r._)("div",Jt,[(0,r._)("div",qt,[(0,r._)("h5",Nt,(0,i.zw)(a.title),1)]),(0,r._)("div",Pt,(0,i.zw)(a.message)+" "+(0,i.zw)(a.seatId)+" ? ",1),(0,r._)("div",Vt,[(0,r._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:e[0]||(e[0]=t=>s.close())},"Cancel"),(0,r._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=t=>s.confirm())},"OK")])])])])}var Wt={props:{title:String,message:String,seatId:Number},methods:{close(){this.$emit("close")},confirm(){this.$emit("confirm",this.seatId)}}};const Kt=(0,y.Z)(Wt,[["render",Gt]]);var Yt=Kt,$t={components:{ConfirmationWindow:Yt},props:{flightId:{required:!0}},data(){return{selectedSeatId:"",showingConfirmation:!1,title:"Confirmation",message:"Are you sure you want to select seat number ",seats:{},flightRef:"",flightData:{},uid:""}},async mounted(){const t=(0,J.v0)(),e=t.currentUser;if(!e)return;this.uid=e.uid;const a=this.$router.currentRoute._value.params.flightId;this.flightRef=(0,b.JU)(w.db,"flights",a),this.flightSnap=await(0,b.QT)(this.flightRef),this.flightSnap.exists()?(this.seats=this.flightSnap.data().seats,this.flightData=this.flightSnap.data()):console.log("Failed to load")},methods:{async reserveSeat(t){const e="seats."+t+".reserved",a="seats."+t+".userId";this.seats[t].reserved=!0,await(0,b.r7)(this.flightRef,{[e]:!0,[a]:this.uid},{merge:!0}),await(0,b.pl)((0,b.JU)(w.db,"userFlights",this.uid),{},{merge:!0});const o=this.flightId+".seats",r=this.flightId+".number",i=this.flightId+".arrive",n=this.flightId+".departure";await(0,b.r7)((0,b.JU)(w.db,"userFlights",this.uid),{[o]:(0,b.vr)(t),[r]:this.flightData.number,[i]:this.flightData.arrivalAirport,[n]:this.flightData.departureAirport},{merge:!0}),this.selectedSeatId=null},showConfirmation(t){this.selectedSeatId=t,this.showingConfirmation=!0},hideConfirmation(){this.showingConfirmation=!1},handleConfirmation(){navigator.vibrate(200),console.log("Selected seat ID:",this.selectedSeatId),this.hideConfirmation(),this.reserveSeat(this.selectedSeatId)}},computed:{rows(){const t={};for(const e in this.seats){const a=parseInt(e),o=Math.floor((a-1)/6)+1,r=a%6,i=3===r,n=r>3,s={id:e,userId:this.seats[e].userId,reserved:this.seats[e].reserved,middleSpace:i,rightOfMiddleSpace:n};t[o]||(t[o]=[]),t[o].push(s)}return Object.values(t)}}};const Qt=(0,y.Z)($t,[["render",Mt],["__scopeId","data-v-f01a1000"]]);var Bt=Qt;const Xt={class:"container"},te={class:"row"},ee={class:"card mb-4 box-shadow"},ae={class:"card-body"},oe={class:"card-title"},re={class:"card-title"},ie={class:"card-title"},ne={class:"card-text"};function se(t,e,a,o,n,s){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Xt,[(0,r._)("div",te,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.reservedFlights,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"col-md-4",key:e},[(0,r._)("div",ee,[(0,r.Wm)(l,{to:{name:"Flight",params:{flightId:e}}},{default:(0,r.w5)((()=>[(0,r._)("div",ae,[(0,r._)("h5",oe,(0,i.zw)(t.number),1),(0,r._)("h5",re,"From: "+(0,i.zw)(t.departure),1),(0,r._)("h5",ie,"To:"+(0,i.zw)(t.arrive),1),(0,r._)("p",ne,"Seats: "+(0,i.zw)(t.seats),1)])])),_:2},1032,["to"])])])))),128))])])}var le={data(){return{userId:"",reservedFlights:[],flightsData:"",flightData:""}},async mounted(){this.userId=this.$router.currentRoute._value.params.userId;const t=(0,b.JU)(w.db,"userFlights",this.userId),e=await(0,b.QT)(t);this.reservedFlights=e.data()}};const ce=(0,y.Z)(le,[["render",se]]);var de=ce;const ue=(0,r._)("div",{class:"container"},[(0,r._)("div",{class:"wrapper"},[(0,r._)("div",{class:"bg"})])],-1),ge={class:"container"},he={class:"card-mt4"},pe=(0,r._)("div",{class:"card-header"},null,-1),me={class:"list-group list-group-flush"},fe={class:"list-group-item",style:{"background-color":"skyblue"}},ve={class:"list-group-item"},we={class:"list-group-item"},be={class:"collapse",id:"departureMapCollapse"},_e={class:"card card-body"},ye=(0,r._)("h4",{"data-bs-toggle":"collapse","data-bs-target":"#departureMapCollapse"}," HIDE",-1),Le=(0,r._)("div",{id:"map"},null,-1);function ke(t,e,a,o,n,s){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[ue,(0,r._)("div",ge,[(0,r._)("div",he,[pe,(0,r._)("ul",me,[(0,r._)("li",fe,"No."+(0,i.zw)(n.flight.number),1),(0,r._)("li",{class:"list-group-item","data-bs-toggle":"collapse","data-bs-target":"#departureMapCollapse","aria-expanded":"false","aria-controls":"departureMapCollapse",onClick:e[0]||(e[0]=t=>s.changeToArrivalLoc())},"To: "+(0,i.zw)(n.flight.arrivalAirport),1),(0,r._)("li",{class:"list-group-item","data-bs-toggle":"collapse","data-bs-target":"#departureMapCollapse","aria-expanded":"false","aria-controls":"departureMapCollapse",onClick:e[1]||(e[1]=t=>s.changeToDepartureLoc())},"From: "+(0,i.zw)(n.flight.departureAirport),1),(0,r._)("li",ve,"Duration: "+(0,i.zw)(n.flight.flightLength),1),(0,r._)("li",we,[(0,r.Wm)(l,{to:{name:"Seats",params:{flightId:a.flightId}}},{default:(0,r.w5)((()=>[(0,r.Uk)("SEATS")])),_:1},8,["to"])]),(0,r._)("div",be,[(0,r._)("div",_e,[ye,(0,r._)("i",{class:"bi bi-geo-alt-fill fs-2",onClick:e[2]||(e[2]=t=>s.changeToMyLoc())},"My Location"),(0,r._)("i",{class:"bi bi-pin-map-fill fs-2",onClick:e[3]||(e[3]=t=>s.changeToCurrentLoc())},"Airport"),Le])])])])])],64)}var Ce=a(7144),Ie=a(3376),De=(a(1827),a(1518)),Se=a(2241),Ue=a(1162),Ae=a(4626),Te=a(1090),ze=a(188),Ee=a(6835),Fe=a(6650),xe={props:{flightId:{required:!0}},data(){return{mapLat:"",mapLong:"",flight:{},departureLocationLat:"",departureLocationLong:"",arrivalLocationLat:"",arrivalLocationLong:"",currentLat:"",currentLong:"",map:"",imgUrl:"",imgUrlArr:"",imgUrlDest:""}},async mounted(){const t=this.$router.currentRoute._value.params.flightId,e=(0,b.JU)(w.db,"flights",t),a=await(0,b.QT)(e);this.flight=a.data(),a.exists()?console.log("Document data:",a.data()):console.log("Failed to load");const o=(0,b.JU)(w.db,"airports",this.flight.departureAirport),r=await(0,b.QT)(o);r.exists()?console.log("Document data:",r.data()):console.log("Failed to load airport data"),this.loadImages(this.flight.arrivalAirport,this.flight.departureAirport);const i=(0,b.JU)(w.db,"airports",this.flight.arrivalAirport),n=await(0,b.QT)(i);n.exists()?console.log("Document data:",n.data()):console.log("Failed to load airport data"),this.departureLocationLat=r.data().location._lat,this.departureLocationLong=r.data().location._long,this.arrivalLocationLat=n.data().location._lat,this.arrivalLocationLong=n.data().location._long,await this.loadMap()},methods:{async loadImages(t,e){const a=(0,b.JU)(w.db,"airports",t),o=await(0,b.QT)(a),r=o.data(),i=(0,b.JU)(w.db,"airports",e),n=await(0,b.QT)(i),s=n.data();console.log(t,e),console.log(r.img);const l=(0,Fe.cF)();await(0,Fe.Jt)((0,Fe.iH)(l,r.img)).then((t=>{const e=document.querySelector(".bg");console.log(t),this.imgUrlArr=t,e.style.backgroundImage=`url('${this.imgUrlArr}')`})).catch((t=>{console.log(t)})),await(0,Fe.Jt)((0,Fe.iH)(l,s.img)).then((t=>{const e=document.querySelector(".wrapper");console.log(t),this.imgUrlDest=t,e.style.backgroundImage=`url('${this.imgUrlDest}')`})).catch((t=>{console.log(t)}))},async loadMap(){this.map=new De.Z({target:"map",layers:[new Ue.Z({source:new Ae.Z})],view:new Se.ZP({center:(0,Ee.mi)([this.mapLong,this.mapLat]),zoom:15})});const t=new Te.Z({geometry:new ze.Z((0,Ee.mi)([this.mapLong,this.mapLat]))}),e=new Ce.Z({source:new Ie.Z({features:[t]})});this.map.addLayer(e)},changeToDepartureLoc(){this.currentLat=this.departureLocationLat,this.currentLong=this.departureLocationLong,this.mapLat=this.departureLocationLat,this.mapLong=this.departureLocationLong;const t=(0,Ee.mi)([this.mapLong,this.mapLat]);this.map.getView().setCenter(t)},changeToArrivalLoc(){this.currentLat=this.arrivalLocationLat,this.currentLong=this.arrivalLocationLong,this.mapLat=this.arrivalLocationLat,this.mapLong=this.arrivalLocationLong;const t=(0,Ee.mi)([this.mapLong,this.mapLat]);this.map.getView().setCenter(t)},changeToMyLoc(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((t=>{console.log("Latitude: "+t.coords.latitude),console.log("Longitude: "+t.coords.longitude),this.mapLat=t.coords.latitude,this.mapLong=t.coords.longitude;const e=(0,Ee.mi)([this.mapLong,this.mapLat]);this.map.getView().setCenter(e)})):console.log("Geolocation is not supported by this browser.")},changeToCurrentLoc(){this.mapLat=this.currentLat,this.mapLong=this.currentLong;const t=(0,Ee.mi)([this.mapLong,this.mapLat]);this.map.getView().setCenter(t)}}};const Re=(0,y.Z)(xe,[["render",ke]]);var je=Re;const Ze=[{path:"/",name:"Home",component:k,meta:{requiresAuth:!0}},{path:"/about",name:"About",component:()=>a.e(283).then(a.bind(a,9283)),meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:P},{path:"/add_flight",name:"AddFlight",component:_t,meta:{requiresAuth:!0}},{path:"/auth/google",name:"GoogleAuth",component:()=>a.e(385).then(a.bind(a,2385))},{path:"/flights/:flightId",name:"Flight",component:je,props:!0,meta:{requiresAuth:!0}},{path:"/reserved/:userId",name:"Reserved",component:de,props:!0,meta:{requiresAuth:!0}},{path:"/flights/:flightId/seats",name:"Seats",component:Bt,props:!0,meta:{requiresAuth:!0}}],Me=(0,o.p7)({history:(0,o.PO)("/flight_seat_reservation/"),routes:Ze});Me.beforeEach(((t,e,a)=>{"/login"===t.path&&w.I.currentUser?a("/"):!t.matched.some((t=>t.meta.requiresAuth))||w.I.currentUser?a():a("/")}));var Oe=Me}},e={};function a(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,o,r,i){if(!o){var n=1/0;for(d=0;d<t.length;d++){o=t[d][0],r=t[d][1],i=t[d][2];for(var s=!0,l=0;l<o.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(t){return a.O[t](o[l])}))?o.splice(l--,1):(s=!1,i<n&&(n=i));if(s){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,r,i]}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,o){return a.f[o](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{283:"1f683481",385:"36fec25c"}[t]+".js"}}(),function(){a.miniCssF=function(t){return"css/"+t+"."+{283:"871d2a72",385:"b574aa42"}[t]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="flightticketreservation:";a.l=function(o,r,i,n){if(t[o])t[o].push(r);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==e+i){s=u;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",e+i),s.src=o),t[o]=[r];var g=function(e,a){s.onerror=s.onload=null,clearTimeout(h);var r=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(t){return t(a)})),e)return e(a)},h=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/flight_seat_reservation/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,a,o,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var n=function(a){if(i.onerror=i.onload=null,"load"===a.type)o();else{var n=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=n,l.request=s,i.parentNode&&i.parentNode.removeChild(i),r(l)}};return i.onerror=i.onload=n,i.href=e,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},e=function(t,e){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var r=a[o],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===t||i===e))return r}var n=document.getElementsByTagName("style");for(o=0;o<n.length;o++){r=n[o],i=r.getAttribute("data-href");if(i===t||i===e)return r}},o=function(o){return new Promise((function(r,i){var n=a.miniCssF(o),s=a.p+n;if(e(n,s))return r();t(o,s,null,r,i)}))},r={143:0};a.f.miniCss=function(t,e){var a={283:1,385:1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=o(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}}(),function(){var t={143:0};a.f.j=function(e,o){var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise((function(a,o){r=t[e]=[a,o]}));o.push(r[2]=i);var n=a.p+a.u(e),s=new Error,l=function(o){if(a.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",s.name="ChunkLoadError",s.type=i,s.request=n,r[1](s)}};a.l(n,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,n=o[0],s=o[1],l=o[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var d=l(a)}for(e&&e(o);c<n.length;c++)i=n[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},o=self["webpackChunkflightticketreservation"]=self["webpackChunkflightticketreservation"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(8845)}));o=a.O(o)})();
//# sourceMappingURL=app.9550d582.js.map