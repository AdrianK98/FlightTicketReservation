(function(){"use strict";var t={6056:function(t,e,a){a.d(e,{I:function(){return l},db:function(){return d}});var r=a(7795),i=a(3854),o=a(36);const s={apiKey:"AIzaSyCaotohqe9mwOy0xKSUk6p6tGzOmi4uvn4",authDomain:"flight-ticket-app-addaro.firebaseapp.com",projectId:"flight-ticket-app-addaro",storageBucket:"flight-ticket-app-addaro.appspot.com",messagingSenderId:"94838896700",appId:"1:94838896700:web:c7b3d496c3b7ce1687eb39"},n=(0,r.ZF)(s),l=(0,i.v0)(n),d=(0,o.ad)(n)},1181:function(t,e,a){var r=a(9242),i=a(3396);const o=(0,i._)("head",null,[(0,i._)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"})],-1),s={key:0,id:"nav"};function n(t,e,a,r,n,l){const d=(0,i.up)("router-link"),c=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[o,t.$store.state.user?((0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(d,{to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1}),(0,i.Uk)(" | "),(0,i.Wm)(d,{to:"/about"},{default:(0,i.w5)((()=>[(0,i.Uk)("Scan QR code")])),_:1}),(0,i.Uk)(" | "),(0,i.Wm)(d,{to:{name:"Reserved",params:{userId:t.$store.state.userId}}},{default:(0,i.w5)((()=>[(0,i.Uk)("Your Flights")])),_:1},8,["to"]),(0,i.Uk)(" | "),(0,i._)("button",{type:"button",class:"btn btn-info",onClick:e[0]||(e[0]=e=>t.$store.dispatch("logout"))},"Logout")])):(0,i.kq)("",!0),(0,i.Wm)(c)],64)}a(7387),a(5654);var l=a(65),d={setup(){const t=(0,l.oR)();(0,i.wF)((()=>{t.dispatch("fetchUser")}))}},c=a(89);const u=(0,c.Z)(d,[["render",n]]);var h=u,g=a(5431);(0,g.z)("/flight_seat_reservation/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var p=a(4346),m=(a(7658),a(6056)),f=a(3854),v=(0,l.MT)({state:{user:null,userId:null},mutations:{SET_USER(t,e){t.user=e,t.userId=e.uid},CLEAR_USER(t){t.user=null,t.userId=null}},actions:{async login({commit:t},e){const{email:a,password:r}=e;try{await(0,f.e5)(m.I,a,r)}catch(i){switch(i.code){default:alert("Something went wrong")}return}t("SET_USER",m.I.currentUser),await p.Z.push("/")},async register({commit:t},e){const{email:a,password:r}=e;try{await(0,f.Xb)(m.I,a,r)}catch(i){switch(i.code){case"auth/email-already-in-use":alert("Email already in use");break;case"auth/invalid-email":alert("Invalid email");break;case"auth/operation-not-allowed":alert("Operation not allowed");break;case"auth/weak-password":alert("Weak password");break;default:alert("Something went wrong")}return}t("SET_USER",m.I.currentUser),await p.Z.push("/")},async logout({commit:t}){await(0,f.w7)(m.I),t("CLEAR_USER"),await p.Z.push("/login")},async loginWithGoogle({commit:t}){const e=new f.hJ;try{const a=await(0,f.rh)(m.I,e),r=a.user;t("SET_USER",r),await p.Z.push("/")}catch(a){alert("Something went wrong")}},fetchUser({commit:t}){m.I.onAuthStateChanged((async e=>{null===e?t("CLEAR_USER"):(t("SET_USER",e),await p.Z.isReady()&&"/login"===p.Z.currentRoute.value.path&&await p.Z.push("/"))}))}}});(0,r.ri)(h).use(v).use(p.Z).mount("#app")},4346:function(t,e,a){a.d(e,{Z:function(){return We}});var r=a(2483),i=a(3396),o=a(7139);const s={class:"container"},n={class:"row"},l={class:"card mb-4 box-shadow"},d={class:"card-body"},c={class:"card-title"},u={class:"card-text"},h={class:"card-text"},g={class:"card-text"},p={class:"card-text"},m={class:"card-text"},f={class:"card-text"};function v(t,e,a,r,v,w){const b=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(v.flights,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"col-md-4",key:e},[(0,i._)("div",l,[(0,i.Wm)(b,{to:{name:"Flight",params:{flightId:t.id}}},{default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i._)("h5",c,"Flight No. "+(0,o.zw)(t.number),1),(0,i._)("p",u,"Departure: "+(0,o.zw)(t.departureAirport),1),(0,i._)("p",h,"Arrival: "+(0,o.zw)(t.arrivalAirport),1),(0,i._)("p",g,"Flight Lenght: "+(0,o.zw)(t.flightLength)+" Hours",1),(0,i._)("p",p,"Departure Time: "+(0,o.zw)(t.departureTime),1),(0,i._)("p",m,"Arrival time: "+(0,o.zw)(t.arrivalTime),1),(0,i._)("p",f,"Price: "+(0,o.zw)(t.price)+" zł",1)])])),_:2},1032,["to"])])])))),128))])])}var w=a(6056),b=a(36),y={data(){return{flights:[]}},async mounted(){try{const t=(0,b.hJ)(w.db,"flights"),e=await(0,b.PL)(t);this.flights=e.docs.map((t=>t.data()))}catch(t){console.error(`Error fetching flights: ${t}`)}}},A=a(89);const _=(0,A.Z)(y,[["render",v]]);var L=_,C=a(9242);const k={class:"container-fluid"},I={class:"row justify-content-center align-items-center"},S={class:"col-md-6 col-lg-4"},U=(0,i._)("h2",{class:"text-center mb-4"},"Login",-1),D={class:"form-group"},E={class:"form-group"},R=(0,i._)("button",{type:"submit",class:"btn btn-primary btn-block mt-4"},"Login",-1),T=(0,i._)("i",{class:"fab fa-google"},null,-1),M={class:"col-md-6 col-lg-4"},Z=(0,i._)("h2",{class:"text-center mb-4"},"Register",-1),F={class:"form-group"},x={class:"form-group"},z=(0,i._)("button",{type:"submit",class:"btn btn-primary btn-block mt-4"},"Register",-1);function O(t,e,a,r,o,s){return(0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("div",I,[(0,i._)("div",S,[(0,i._)("form",{class:"card p-4",onSubmit:e[3]||(e[3]=(0,C.iM)(((...t)=>r.login&&r.login(...t)),["prevent"]))},[U,(0,i._)("div",D,[(0,i.wy)((0,i._)("input",{type:"email",class:"form-control",placeholder:"Email address","onUpdate:modelValue":e[0]||(e[0]=t=>r.login_form.email=t)},null,512),[[C.nr,r.login_form.email]])]),(0,i._)("div",E,[(0,i.wy)((0,i._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=t=>r.login_form.password=t)},null,512),[[C.nr,r.login_form.password]])]),R,(0,i._)("button",{onClick:e[2]||(e[2]=(0,C.iM)(((...t)=>r.loginWithGoogle&&r.loginWithGoogle(...t)),["prevent"])),class:"btn btn-danger btn-block mt-4"},[T,(0,i.Uk)(" Login with Google ")])],32)]),(0,i._)("div",M,[(0,i._)("form",{class:"card p-4 my-4",onSubmit:e[6]||(e[6]=(0,C.iM)(((...t)=>r.register&&r.register(...t)),["prevent"]))},[Z,(0,i._)("div",F,[(0,i.wy)((0,i._)("input",{type:"email",class:"form-control",placeholder:"Email address","onUpdate:modelValue":e[4]||(e[4]=t=>r.register_form.email=t)},null,512),[[C.nr,r.register_form.email]])]),(0,i._)("div",x,[(0,i.wy)((0,i._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":e[5]||(e[5]=t=>r.register_form.password=t)},null,512),[[C.nr,r.register_form.password]])]),z],32)])])])}var j=a(4870),J=a(65),G=a(3854),H=(a(7387),a(5654),{data(){return{audio:null,soundUrl:"https://cdn.pixabay.com/download/audio/2022/03/20/audio_5608de38a9.mp3?filename=annoyed-goodbye-96952.mp3"}},mounted(){this.audio=new Audio(this.soundUrl),this.audio.currentTime=0,this.audio.play()},setup(){const t=(0,j.iH)({}),e=(0,j.iH)({}),a=(0,J.oR)(),r=()=>{a.dispatch("login",t.value)},i=()=>{a.dispatch("register",e.value)},o=async()=>{const t=new G.hJ;try{const e=await(0,G.rh)(w.I,t),a=e.user;console.log("Logged in with Google: ",a)}catch(e){console.log("Error logging in with Google: ",e.message)}};return{login_form:t,register_form:e,login:r,register:i,loginWithGoogle:o}}});const Q=(0,A.Z)(H,[["render",O]]);var B=Q;const N={class:"container-fluid"},P=(0,i._)("h1",null,"Dodaj lot",-1),Y={class:"row justify-content-md-center"},K={class:"col col-lg-3"},V=(0,i._)("label",{for:"flight-number"},"Numer lotu:",-1),W={class:"row justify-content-md-center"},q={class:"col col-lg-3"},X=(0,i._)("label",{for:"flight-number"},"Lotnisko wylotu:",-1),$=["value"],tt={class:"row justify-content-md-center"},et={class:"col col-lg-3"},at=(0,i._)("label",{for:"arrival-airport"},"Lotnisko przylotu:",-1),rt=["value"],it={class:"row justify-content-md-center"},ot={class:"col col-lg-3"},st=(0,i._)("label",{for:"flight-length"},"Długość lotu:",-1),nt={class:"row justify-content-md-center"},lt={class:"col col-lg-3"},dt=(0,i._)("label",{for:"departure-time"},"Godzina wylotu:",-1),ct={class:"row justify-content-md-center"},ut={class:"col col-lg-3"},ht=(0,i._)("label",{for:"arrival-time"},"Godzina przylotu:",-1),gt={class:"row justify-content-md-center"},pt={class:"col col-lg-3"},mt=(0,i._)("label",{for:"price"},"Cena:",-1),ft=(0,i._)("button",{type:"submit",class:"btn btn-primary"},"Dodaj lot",-1);function vt(t,e,a,r,s,n){return(0,i.wg)(),(0,i.iD)("div",N,[P,(0,i._)("form",{onSubmit:e[7]||(e[7]=(0,C.iM)(((...t)=>n.addFlight&&n.addFlight(...t)),["prevent"]))},[(0,i._)("div",Y,[(0,i._)("div",K,[V,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"flight-number","onUpdate:modelValue":e[0]||(e[0]=t=>s.flight.number=t)},null,512),[[C.nr,s.flight.number]])])]),(0,i._)("div",W,[(0,i._)("div",q,[X,(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example",id:"departue-airport","onUpdate:modelValue":e[1]||(e[1]=t=>s.flight.departureAirport=t)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.airports,((t,e)=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:t.name},(0,o.zw)(t.name),9,$)))),128))],512),[[C.bM,s.flight.departureAirport]])])]),(0,i._)("div",tt,[(0,i._)("div",et,[at,(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example",id:"arrival-airport","onUpdate:modelValue":e[2]||(e[2]=t=>s.flight.arrivalAirport=t)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.airports,((t,e)=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:t.name},(0,o.zw)(t.name),9,rt)))),128))],512),[[C.bM,s.flight.arrivalAirport]])])]),(0,i._)("div",it,[(0,i._)("div",ot,[st,(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"flight-length","onUpdate:modelValue":e[3]||(e[3]=t=>s.flight.flightLength=t)},null,512),[[C.nr,s.flight.flightLength]])])]),(0,i._)("div",nt,[(0,i._)("div",lt,[dt,(0,i.wy)((0,i._)("input",{type:"datetime-local",class:"form-control",id:"departure-time","onUpdate:modelValue":e[4]||(e[4]=t=>s.flight.departureTime=t)},null,512),[[C.nr,s.flight.departureTime]])])]),(0,i._)("div",ct,[(0,i._)("div",ut,[ht,(0,i.wy)((0,i._)("input",{type:"datetime-local",class:"form-control",id:"arrival-time","onUpdate:modelValue":e[5]||(e[5]=t=>s.flight.arrivalTime=t)},null,512),[[C.nr,s.flight.arrivalTime]])])]),(0,i._)("div",gt,[(0,i._)("div",pt,[mt,(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":e[6]||(e[6]=t=>s.flight.price=t)},null,512),[[C.nr,s.flight.price]])])]),ft],32)])}var wt={data(){return{airports:[],flight:{number:"",departureAirport:"",arrivalAirport:"",flightLength:"",departureTime:"",arrivalTime:"",price:""},seats:{reserved:""}}},async mounted(){try{const t=(0,b.hJ)(w.db,"airports"),e=await(0,b.PL)(t);this.airports=e.docs.map((t=>t.data())),console.log(this.airports)}catch(t){console.error(`Error fetching flights: ${t}`)}},methods:{async addFlight(){try{const t=await(0,b.ET)((0,b.hJ)(w.db,"flights"),{});await(0,b.pl)((0,b.JU)(w.db,"flights",t.id),this.flight),this.flight={number:"",departureAirport:"",arrivalAirport:"",flightLength:"",departureTime:"",arrivalTime:"",price:""};const e={id:t.id,seats:{}};for(let a=1;a<=90;a++)e.seats[a]={reserved:!1};await(0,b.pl)((0,b.JU)(w.db,"flights",t.id),e,{merge:!0}),console.log("Document written with ID: ",t.id)}catch(t){alert(`Błąd podczas dodawania lotu do bazy danych: ${t}`)}}}};const bt=(0,A.Z)(wt,[["render",vt]]);var yt=bt;const At=t=>((0,i.dD)("data-v-bffcee88"),t=t(),(0,i.Cn)(),t),_t=At((()=>(0,i._)("h1",null,"Choose your seat",-1))),Lt=At((()=>(0,i._)("br",null,null,-1))),Ct=At((()=>(0,i._)("br",null,null,-1))),kt={class:"container"},It=(0,i.uE)('<div class="row" data-v-bffcee88><div class="col" data-v-bffcee88><span class="badge bg-white w-auto px-5 py-3 m-2 text-dark" data-v-bffcee88> Free </span></div><div class="col" data-v-bffcee88><span class="badge bg-secondary w-auto p-3 m-2" data-v-bffcee88>Already Reserved</span></div><div class="col" data-v-bffcee88><span class="badge bg-danger w-auto p-3 m-2" data-v-bffcee88>Reserved by you</span></div></div><div class="row justify-content-center mt-5" data-v-bffcee88><h2 data-v-bffcee88>Front of the Plane</h2></div>',2),St={class:"row justify-content-center"},Ut={class:"col-md-5"},Dt=At((()=>(0,i._)("h2",null,"Left Row",-1))),Et=["disabled","onClick"],Rt=["onClick"],Tt=["disabled"],Mt=At((()=>(0,i._)("div",{class:"col-md-2"},null,-1))),Zt={class:"col-md-5"},Ft=At((()=>(0,i._)("h2",null,"Right Row",-1))),xt=["disabled","onClick"],zt=["onClick"],Ot=["disabled"];function jt(t,e,a,r,s,n){const l=(0,i.up)("confirmation-window");return(0,i.wg)(),(0,i.iD)(i.HY,null,[_t,Lt,Ct,(0,i._)("div",kt,[It,(0,i._)("div",St,[(0,i._)("div",Ut,[Dt,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.rows,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"row",key:e},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.slice(0,3),(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-4 mb-3",key:t.id},[t.reserved?t.userId==this.uid?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,o.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,i._)("div",{class:"card-body",onClick:e=>n.showConfirmation(t.id,!0)},(0,o.zw)(t.id),9,Rt)],2)):((0,i.wg)(),(0,i.iD)("div",{key:2,class:(0,o.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,i._)("div",{class:"card-body",disabled:!t.available},(0,o.zw)(t.id),9,Tt)],2)):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,o.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,i._)("div",{class:"card-body",disabled:!t.available,onClick:e=>n.showConfirmation(t.id,!1)},(0,o.zw)(t.id),9,Et)],2))])))),128))])))),128))]),Mt,(0,i._)("div",Zt,[Ft,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.rows,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"row",key:e},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.slice(3,6),(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-4 mb-3",key:t.id},[t.reserved?t.userId==this.uid?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,o.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,i._)("div",{class:"card-body",onClick:e=>n.showConfirmation(t.id,!0)},(0,o.zw)(t.id),9,zt)],2)):((0,i.wg)(),(0,i.iD)("div",{key:2,class:(0,o.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,i._)("div",{class:"card-body",disabled:!t.available},(0,o.zw)(t.id),9,Ot)],2)):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,o.C_)(["card",{"bg-danger":t.userId==this.uid,"bg-secondary":t.reserved}])},[(0,i._)("div",{class:"card-body",disabled:!t.available,onClick:e=>n.showConfirmation(t.id,!1)},(0,o.zw)(t.id),9,xt)],2))])))),128))])))),128))])]),(0,i._)("div",null,[s.showingConfirmation?((0,i.wg)(),(0,i.j4)(l,{key:0,onClose:n.hideConfirmation,onConfirm:n.handleConfirmation,title:s.title,message:n.confirmationMessage,"seat-id":s.selectedSeatId},null,8,["onClose","onConfirm","title","message","seat-id"])):(0,i.kq)("",!0)])])],64)}a(7658);const Jt={class:"modal",tabindex:"-1",role:"dialog",style:{display:"block"}},Gt={class:"modal-dialog modal-dialog-centered",role:"document"},Ht={class:"modal-content"},Qt={class:"modal-header"},Bt={class:"modal-title"},Nt={class:"modal-body"},Pt={class:"modal-footer"};function Yt(t,e,a,r,s,n){return(0,i.wg)(),(0,i.iD)("div",Jt,[(0,i._)("div",Gt,[(0,i._)("div",Ht,[(0,i._)("div",Qt,[(0,i._)("h5",Bt,(0,o.zw)(a.title),1)]),(0,i._)("div",Nt,(0,o.zw)(a.message)+" "+(0,o.zw)(a.seatId)+" ? ",1),(0,i._)("div",Pt,[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:e[0]||(e[0]=t=>n.close())},"Cancel"),(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=t=>n.confirm())},"OK")])])])])}var Kt={props:{title:String,message:String,seatId:Number},methods:{close(){this.$emit("close")},confirm(){this.$emit("confirm",this.seatId)}}};const Vt=(0,A.Z)(Kt,[["render",Yt]]);var Wt=Vt,qt={components:{ConfirmationWindow:Wt},props:{flightId:{required:!0}},data(){return{selectedSeatId:"",showingConfirmation:!1,title:"Confirmation",message:"Are you sure you want to select seat number ",delMessage:"Are you sure you want to delete reservation of seat number ",seats:{},flightRef:"",flightData:{},flightSeatCheck:[],uid:"",freeReservation:null}},async mounted(){const t=(0,G.v0)(),e=t.currentUser;this.uid=e.uid;const a=this.$router.currentRoute._value.params.flightId;this.flightRef=(0,b.JU)(w.db,"flights",a),this.flightSnap=await(0,b.QT)(this.flightRef),this.flightSnap.exists()?(this.seats=this.flightSnap.data().seats,this.flightData=this.flightSnap.data()):console.log("Failed to load")},methods:{async reserveSeat(t){const e="seats."+t+".reserved",a="seats."+t+".userId";this.seats[t].reserved=!0,await(0,b.r7)(this.flightRef,{[e]:!0,[a]:this.uid},{merge:!0}),await(0,b.pl)((0,b.JU)(w.db,"userFlights",this.uid),{},{merge:!0});const r=this.flightId+".seats",i=this.flightId+".number",o=this.flightId+".arrive",s=this.flightId+".departure";t=parseInt(t),await(0,b.r7)((0,b.JU)(w.db,"userFlights",this.uid),{[r]:(0,b.vr)(t),[i]:this.flightData.number,[o]:this.flightData.arrivalAirport,[s]:this.flightData.departureAirport},{merge:!0}),this.selectedSeatId=null},showConfirmation(t,e){this.freeReservation=e,this.selectedSeatId=t,this.showingConfirmation=!0},hideConfirmation(){this.showingConfirmation=!1},handleConfirmation(){this.freeReservation?(navigator.vibrate(200),console.log("deleting reservation of seat ID:",this.selectedSeatId),this.hideConfirmation(),this.deleteReservation(this.selectedSeatId)):(navigator.vibrate(200),console.log("Selected seat ID:",this.selectedSeatId),this.hideConfirmation(),this.reserveSeat(this.selectedSeatId))},async deleteReservation(t){const e="seats."+t;this.seats[t].reserved=!1,await(0,b.r7)(this.flightRef,{[e]:{reserved:!1}},{merge:!1});const a=this.flightId+".seats";t=parseInt(t),await(0,b.r7)((0,b.JU)(w.db,"userFlights",this.uid),{[a]:(0,b.Ab)(t)},{merge:!0});const r=(0,b.JU)(w.db,"userFlights",this.uid),i=await(0,b.QT)(r);this.flightSeatCheck=i.data()[this.flightId],0===this.flightSeatCheck.seats.length&&(await(0,b.r7)(r,{[this.flightId]:(0,b.AK)()}),console.log("SEATS DONT EXIST DELETING FIELD KEY")),console.log("Deleted seat "+t+" from reservation")}},computed:{confirmationMessage(){return this.freeReservation?this.delMessage:this.message},rows(){const t={};for(const e in this.seats){const a=parseInt(e),r=Math.floor((a-1)/6)+1,i=a%6,o=3===i,s=i>3,n={id:e,userId:this.seats[e].userId,reserved:this.seats[e].reserved,middleSpace:o,rightOfMiddleSpace:s};t[r]||(t[r]=[]),t[r].push(n)}return Object.values(t)}}};const Xt=(0,A.Z)(qt,[["render",jt],["__scopeId","data-v-bffcee88"]]);var $t=Xt;const te={class:"container"},ee={class:"row"},ae={class:"card mb-4 box-shadow"},re={class:"card-body"},ie={class:"card-title"},oe={class:"card-title"},se={class:"card-title"},ne=(0,i._)("p",{class:"card-text"},"Your reserved seats: ",-1);function le(t,e,a,r,s,n){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",te,[(0,i._)("div",ee,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.reservedFlights,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"col-md-4",key:e},[(0,i._)("div",ae,[(0,i.Wm)(l,{to:{name:"Flight",params:{flightId:e}}},{default:(0,i.w5)((()=>[(0,i._)("div",re,[(0,i._)("h5",ie,(0,o.zw)(t.number),1),(0,i._)("h5",oe,"From: "+(0,o.zw)(t.departure),1),(0,i._)("h5",se,"To: "+(0,o.zw)(t.arrive),1),ne,(0,i.Uk)(" "+(0,o.zw)(t.seats.join(", ")),1)])])),_:2},1032,["to"])])])))),128))])])}var de={data(){return{userId:"",reservedFlights:[],flightsData:"",flightData:""}},async mounted(){this.userId=this.$router.currentRoute._value.params.userId;const t=(0,b.JU)(w.db,"userFlights",this.userId),e=await(0,b.QT)(t);this.reservedFlights=e.data()}};const ce=(0,A.Z)(de,[["render",le]]);var ue=ce;const he=(0,i._)("div",{class:"container"},[(0,i._)("div",{class:"wrapper"},[(0,i._)("div",{class:"bg"})])],-1),ge={class:"container"},pe={class:"card-mt4"},me=(0,i._)("div",{class:"card-header"},null,-1),fe={class:"list-group list-group-flush"},ve={class:"list-group-item",style:{"background-color":"skyblue"}},we={role:"button"},be={class:"list-group-item"},ye={role:"button"},Ae={class:"list-group-item"},_e={class:"list-group-item"},Le={class:"list-group-item"},Ce=(0,i._)("h5",null,"SEATS",-1),ke={class:"collapse",id:"departureMapCollapse"},Ie={class:"card card-body"},Se=(0,i._)("h4",{"data-bs-toggle":"collapse","data-bs-target":"#departureMapCollapse"}," HIDE",-1),Ue=(0,i._)("div",{id:"map"},null,-1),De=(0,i._)("div",{class:"container-fluid"},null,-1);function Ee(t,e,a,r,s,n){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[he,(0,i._)("div",ge,[(0,i._)("div",pe,[me,(0,i._)("ul",fe,[(0,i._)("li",ve,"No."+(0,o.zw)(s.flight.number),1),(0,i._)("li",{class:"list-group-item","data-bs-toggle":"collapse","data-bs-target":"#departureMapCollapse","aria-expanded":"false","aria-controls":"departureMapCollapse",onClick:e[0]||(e[0]=t=>n.changeToDepartureLoc())},[(0,i.Uk)("Departure:"),(0,i._)("b",we,(0,o.zw)(s.flight.departureAirport),1)]),(0,i._)("li",be,"Departure time: "+(0,o.zw)(s.flight.departureTime),1),(0,i._)("li",{class:"list-group-item","data-bs-toggle":"collapse","data-bs-target":"#departureMapCollapse","aria-expanded":"false","aria-controls":"departureMapCollapse",onClick:e[1]||(e[1]=t=>n.changeToArrivalLoc())},[(0,i.Uk)("Arrival: "),(0,i._)("b",ye,(0,o.zw)(s.flight.arrivalAirport),1)]),(0,i._)("li",Ae,"Arrival time: "+(0,o.zw)(s.flight.arrivalTime),1),(0,i._)("li",_e,"Flight duration: "+(0,o.zw)(s.flight.flightLength)+" Hours",1),(0,i._)("li",Le,[(0,i.Wm)(l,{to:{name:"Seats",params:{flightId:a.flightId}}},{default:(0,i.w5)((()=>[Ce])),_:1},8,["to"])]),(0,i._)("div",ke,[(0,i._)("div",Ie,[Se,(0,i._)("i",{class:"bi bi-geo-alt-fill fs-2",onClick:e[2]||(e[2]=t=>n.changeToMyLoc())},"My Location"),(0,i._)("i",{class:"bi bi-pin-map-fill fs-2",onClick:e[3]||(e[3]=t=>n.changeToCurrentLoc())},"Airport"),Ue])])])])]),De],64)}var Re=a(3567),Te=a(3292),Me=(a(1827),a(2598)),Ze=a(7793),Fe=a(4109),xe=a(7253),ze=a(1508),Oe=a(8437),je=a(2205),Je=a(2949),Ge=a(9962),He=a(1294),Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAM3SURBVFhH7ZhfiA1RHMdnJv+WhAfduxTLg/yJxAMPEymPlzwQT/488GILD160IkRpYzeiUGwUD0TbdNcLS3fvSlnakPLASrpSm91Cir3j+5vzS/bOnJnfnLne9lO/vr/fuTNzv3vOmXPOXmuMjNisxlQ2uA2Wby1GuhCRQ0xCfEIMNHo9j6GZMDZYKbhLIbs4plNbBFXEOUQbzA4ELSlJbRDGyMwRBBmbRm1C2mFyP+diUhnEcDZhOG8hXaVaUtPvW/66WV75K9eJiA1yzz1FLAgazHljV+0V+WLpJ9exOKwSriKymiMW+Y5/n/NERAbRewcgm1SlZQjRh3gUVPGsxTO3cR5L4hBj3k3BvHuNdK5qCUHGjiI68BJQHgADeyCtiKlBQ5ghXD+Dcy3JBgsu9dxdVYWoIFx80TtVjgb3zoO8QkwOGsLsxL0dnEciGeIdrFEc0pkj8Nl7yGZVRVJg1SIxuJy1lrcwcI1zLbimC6JbpNezaok1+Lngjofo5t4TVgm9rLU0YBrELvaxBrGoToTo5il9JoW2vCjoGRNUGk2swUav/A3yXVUhaC+WMoe1lmHbsn9wHolkDtLuEcUSDE8T51pwzTLIGlWFeJH3SroOCJAYvM4axW3WSGCOtsfjqorkIasWicF7CN2+uRIm+rCYz+b6L2ibD6G3fGPQEGYYcUGlekSHBZhog+xTlZY7iJeIEQSddlyE7pxIXMYSRLtNLFKD9EXiI5KAX4jVMPhclXokQ0yLLe2xV1RVF25IzBEig8xBhOgMlwAtXe0qTUZskHuRjvpZOYNn9XOeSJoeJOitowOAKR8RZ1UqI5VB/OU0PM2qMuIkj4SYtD1IJouQB6pKRfc4x7/EuZjUBpmtrFJoO2uZ2VnWHRq0GBlELw5CDqtKRCvu0R25YjHtQctx7FMQya8FHxC0ExlhbDDXWaItbYuqtPxGNKd9Mf7F2CCBL34GiTvRXMQ1HudGZDLI7EZE7dOD2OhPcG5MZoM8fHtVNYpjea/nC+fG1KMHyeRNSLeqAorOSPU855moi0FmOyv1aEuuqzf1mvffwbnxNIJ+Bqkb9exBYNP/H8Zr3hj1x7L+AL3F0q5bqTgCAAAAAElFTkSuQmCC",Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANPSURBVFhH7ZdbSBRRGMfPXszcCsuoKMTsZgQSopHRBepJlC70lEMFxQa9FNVTLxHdICqiXnooGKmgBuyhy0sQ9ZDgQ4bRQ1ZGWXY1wtQwdd1dp/8356ugnXNmdlZfwh98V3d3/vOdmeOMGOd/J8QxGNcawiJsVyOrgJXBZlAb/IS9hLUKI97kdAISTKBlToXfB9sOW0AtDW9hN4SwDwljV1K2/JO9QMvcDH8ONtep/dMH24+JXpalP/wLlFM7Btvr1ME5D5EHOPfEn8DGK2GRTpnIdshGztyFyDrOtYQ56kmnjsOPljiiFitylHMt3hO0zA3wt2D+TiY7VmCSjzh3RX9QqyEf/ghsLMQR1zkq8TiwXQtXKXM9ofwJIjK9yLFQNMpdT+Zjheo5d8VrMls5KiEx+UvKRGzlclFQudSxSetWOz0R8nUPrufoilpg40X62zJZuEPiJlaUi7ziORlTo16suoorLQEFpqPl8KWycCevpFhEptH26E54ymQxobSEKyWFWOZFnGegW+KZHJVEZ8/iTE3ePE+BRCCBhRyVhGMFnKkJRSKcaVEug04gPZFosRPDnKmxh309HwxxzEAn8ANHJanu75ypSffSM4InHRwz0An8BEvL1J3hjncYkc1VJnYqJZKdnufZD/sq00zUAo14L3yLLNyxB4fEYOtTIUZGuPMXO5kUiWcvRLrvB3eUtOFYXzjPQDdB4ipHJemePtH/oEkkXr0Ryc9djiXaX4uB5haR+tbNn9Jyk6Mr+q3eMmPwtEZFTj369MAWYoLKi1k/QSM+AH9YFmPCSZ04wmuJSeQF+GZZjCoPYZdkqsZboGQjTHkhB4C2lW04ec89yJ9AZxlCq5B1yUZO0FteDX7zoyz1+H9pIixzMfwTGN08QXiPDWgNXj8R/eF3iSVGvB1+rSyyhvacumzEEdkJJIz4Y/gaWfiGNv16fLdNlv7JXiBhxO/BH5SFJ/S/cCe+c1+W2RFMIGHET8PfkYWWM/gsvRUGIrhAwg7RC89zWbhyG3ZCpsHI7i52wzLptYD2tX9/i26KKkyvU5bByG2ChBHHMxdugEz25CqOyH2Cv7FMus42yUI0QtwWznMi9wn+wSZBZ2GnYLupM844ngjxCxFgwgKQgSdNAAAAAElFTkSuQmCC",Ne={props:{flightId:{required:!0}},data(){return{mapLat:"",mapLong:"",flight:{},departureLocationLat:"",departureLocationLong:"",arrivalLocationLat:"",arrivalLocationLong:"",currentLat:"",currentLong:"",map:"",imgUrl:"",imgUrlArr:"",imgUrlDest:"",latLongCurrentPosition:""}},async mounted(){await navigator.geolocation.getCurrentPosition((t=>{const e=t.coords.latitude,a=t.coords.longitude;this.latLongCurrentPosition=(0,Ge.mi)([a,e])}));const t=this.$router.currentRoute._value.params.flightId,e=(0,b.JU)(w.db,"flights",t),a=await(0,b.QT)(e);a.exists()?(this.flight=a.data(),console.log("Document data has beed read")):console.log("Failed to load");const r=(0,b.JU)(w.db,"airports",this.flight.departureAirport),i=await(0,b.QT)(r);i.exists()?console.log("Airport data has beed read"):console.log("Failed to load airport data");try{await this.loadImages(this.flight.arrivalAirport,this.flight.departureAirport)}catch(n){console.log(n)}const o=(0,b.JU)(w.db,"airports",this.flight.arrivalAirport),s=await(0,b.QT)(o);s.exists()?console.log("Document data has beed read"):console.log("Failed to load airport data"),this.departureLocationLat=i.data().location._lat,this.departureLocationLong=i.data().location._long,this.arrivalLocationLat=s.data().location._lat,this.arrivalLocationLong=s.data().location._long,await this.loadMap()},methods:{async loadImages(t,e){const a=(0,b.JU)(w.db,"airports",t),r=await(0,b.QT)(a),i=r.data(),o=(0,b.JU)(w.db,"airports",e),s=await(0,b.QT)(o),n=s.data(),l=(0,He.cF)();await(0,He.Jt)((0,He.iH)(l,i.img)).then((t=>{const e=document.querySelector(".bg");this.imgUrlArr=t,e.style.backgroundImage=`url('${this.imgUrlArr}')`})).catch((t=>{console.log(t)})),await(0,He.Jt)((0,He.iH)(l,n.img)).then((t=>{const e=document.querySelector(".wrapper");this.imgUrlDest=t,e.style.backgroundImage=`url('${this.imgUrlDest}')`})).catch((t=>{console.log(t)}))},async loadMap(){this.map=new Me.Z({target:"map",layers:[new Fe.Z({source:new xe.Z})],view:new Ze.ZP({center:(0,Ge.mi)([this.mapLong,this.mapLat]),zoom:15})});const t=new ze.Z({geometry:new Je.Z((0,Ge.mi)([this.departureLocationLong,this.departureLocationLat]))}),e=new ze.Z({geometry:new Je.Z(this.latLongCurrentPosition)}),a=new ze.Z({geometry:new Je.Z((0,Ge.mi)([this.arrivalLocationLong,this.arrivalLocationLat]))});var r=new je.ZP({image:new Oe.Z({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:Qe})}),i=new je.ZP({image:new Oe.Z({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:Be})});t.setStyle(r),a.setStyle(r),e.setStyle(i);const o=new Te.Z({features:[t,a,e]}),s=new Re.Z({source:o});this.map.addLayer(s)},changeToDepartureLoc(){this.currentLat=this.departureLocationLat,this.currentLong=this.departureLocationLong,this.mapLat=this.departureLocationLat,this.mapLong=this.departureLocationLong;const t=(0,Ge.mi)([this.mapLong,this.mapLat]);this.map.getView().setCenter(t)},changeToArrivalLoc(){this.currentLat=this.arrivalLocationLat,this.currentLong=this.arrivalLocationLong,this.mapLat=this.arrivalLocationLat,this.mapLong=this.arrivalLocationLong;const t=(0,Ge.mi)([this.mapLong,this.mapLat]);this.map.getView().setCenter(t)},changeToMyLoc(){this.map.getView().setCenter(this.latLongCurrentPosition)},changeToCurrentLoc(){this.mapLat=this.currentLat,this.mapLong=this.currentLong;const t=(0,Ge.mi)([this.mapLong,this.mapLat]);this.map.getView().setCenter(t)}}};const Pe=(0,A.Z)(Ne,[["render",Ee]]);var Ye=Pe;const Ke=[{path:"/",name:"Home",component:L,meta:{requiresAuth:!0}},{path:"/about",name:"About",component:()=>a.e(283).then(a.bind(a,9283)),meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:B},{path:"/add_flight",name:"AddFlight",component:yt,meta:{requiresAuth:!0}},{path:"/auth/google",name:"GoogleAuth",component:()=>a.e(385).then(a.bind(a,2385))},{path:"/flights/:flightId",name:"Flight",component:Ye,props:!0,meta:{requiresAuth:!0}},{path:"/reserved/:userId",name:"Reserved",component:ue,props:!0,meta:{requiresAuth:!0}},{path:"/flights/:flightId/seats",name:"Seats",component:$t,props:!0,meta:{requiresAuth:!0}}],Ve=(0,r.p7)({history:(0,r.PO)("/flight_seat_reservation/"),routes:Ke,base:"/flight_seat_reservation/"});Ve.beforeEach(((t,e,a)=>{"/login"===t.path&&w.I.currentUser?a("/"):!t.matched.some((t=>t.meta.requiresAuth))||w.I.currentUser?a():a("/login")}));var We=Ve}},e={};function a(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,r,i,o){if(!r){var s=1/0;for(c=0;c<t.length;c++){r=t[c][0],i=t[c][1],o=t[c][2];for(var n=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(n=!1,o<s&&(s=o));if(n){t.splice(c--,1);var d=i();void 0!==d&&(e=d)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,i,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,r){return a.f[r](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{283:"caa17012",385:"1081b028"}[t]+".js"}}(),function(){a.miniCssF=function(t){return"css/"+t+"."+{283:"871d2a72",385:"b574aa42"}[t]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="flightticketreservation:";a.l=function(r,i,o,s){if(t[r])t[r].push(i);else{var n,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==e+o){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",e+o),n.src=r),t[r]=[i];var h=function(e,a){n.onerror=n.onload=null,clearTimeout(g);var i=t[r];if(delete t[r],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(t){return t(a)})),e)return e(a)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=h.bind(null,n.onerror),n.onload=h.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/flight_seat_reservation/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,a,r,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var s=function(a){if(o.onerror=o.onload=null,"load"===a.type)r();else{var s=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=n,o.parentNode&&o.parentNode.removeChild(o),i(l)}};return o.onerror=o.onload=s,o.href=e,a?a.parentNode.insertBefore(o,a.nextSibling):document.head.appendChild(o),o},e=function(t,e){for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var i=a[r],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===t||o===e))return i}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){i=s[r],o=i.getAttribute("data-href");if(o===t||o===e)return i}},r=function(r){return new Promise((function(i,o){var s=a.miniCssF(r),n=a.p+s;if(e(s,n))return i();t(r,n,null,i,o)}))},i={143:0};a.f.miniCss=function(t,e){var a={283:1,385:1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=r(t).then((function(){i[t]=0}),(function(e){throw delete i[t],e})))}}}(),function(){var t={143:0};a.f.j=function(e,r){var i=a.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(a,r){i=t[e]=[a,r]}));r.push(i[2]=o);var s=a.p+a.u(e),n=new Error,l=function(r){if(a.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;n.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",n.name="ChunkLoadError",n.type=o,n.request=s,i[1](n)}};a.l(s,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,o,s=r[0],n=r[1],l=r[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(l)var c=l(a)}for(e&&e(r);d<s.length;d++)o=s[d],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(c)},r=self["webpackChunkflightticketreservation"]=self["webpackChunkflightticketreservation"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(1181)}));r=a.O(r)})();
//# sourceMappingURL=app.75a328fd.js.map